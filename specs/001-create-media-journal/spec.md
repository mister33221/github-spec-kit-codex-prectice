# Feature Specification: 影視觀影紀錄社群平台

**Feature Branch**: `001-create-media-journal`  
**Created**: 2025-11-15  
**Status**: Draft  
**Input**: User description: "我想要建立一個專案，此專案可以用來記錄個人觀看影視作品的紀錄、心得、有價值的台詞及評論。也導入社群的概念，讓用戶可以依照影視作品、年份、作品類型、綜合評分等等相關標籤進行討論及回覆，而個人記錄也可以衍伸出個人的版面，而可能有會有些用戶非常專業，其他一般人用戶就可以用某些方法專注這些用戶的評價及觀看記錄等等。如果你有其他建議需要或不需要加入的功能，也可以幫我寫上去，只要你有幫我標註這些是你的建議就好，我會再去檢查。這個專案的色調我希望偏暗色系，簡約又有未來感。"

## User Scenarios & Testing *(mandatory)*

<!--
  IMPORTANT: User stories should be PRIORITIZED as user journeys ordered by importance.
  Each user story/journey must be INDEPENDENTLY TESTABLE - meaning if you implement just ONE of them,
  you should still have a viable MVP (Minimum Viable Product) that delivers value.
  
  Assign priorities (P1, P2, P3, etc.) to each story, where P1 is the most critical.
  Think of each story as a standalone slice of functionality that can be:
  - Developed independently
  - Tested independently
  - Deployed independently
  - Demonstrated to users independently
-->

### User Story 1 - 建立個人觀影筆記 (Priority: P1)

身為影視愛好者，我需要快速記錄觀影作品、時間、星級評分、心得，以及打動我的台詞，讓自己的收藏版面成為可視化的觀影履歷。

**Why this priority**: 沒有穩定筆記功能就無法累積任何資料，整個平台價值會崩塌，因此列為首要。

**Independent Test**: 只需驗證使用者能在 2 分鐘內新增、編輯、瀏覽一篇觀影筆記並保存，即可獨立驗證。

**Acceptance Scenarios**:

1. **Given** 使用者已登入深色介面，**When** 於「新增紀錄」表單輸入作品、年份、標籤、評分與心得並儲存，**Then** 系統儲存紀錄且立刻導向該篇詳細頁展示所有欄位與引用區塊。
2. **Given** 使用者已有觀影紀錄，**When** 編輯心得內容與引用順序，**Then** 系統保留更動歷史並更新個人版面上的卡片摘要。

---

### User Story 2 - 標籤化討論與回覆 (Priority: P2)

身為想交流的社群成員，我要能在特定作品、年份或類型標籤下開啟討論串、引用他人評論並回覆，確保社群維持有結構的討論。

**Why this priority**: 社群互動是與一般筆記 App 最大差異，也是帶動留存的次核心能力。

**Independent Test**: 驗證用戶能從任一標籤瀏覽器進入討論串、留言、被即時顯示即可獨立驗證。

**Acceptance Scenarios**:

1. **Given** 作品詳情頁已綁定「2024」「科幻」等標籤，**When** 使用者在標籤討論區張貼心得或提問，**Then** 該貼文同時出現在作品頁與相同標籤的聚合牆並可被回覆。
2. **Given** 另一名使用者閱讀該貼文，**When** 以引用模式挑選原作者句子後回覆，**Then** 系統顯示階層化回覆並通知原作者。

---

### User Story 3 - 專業用戶追蹤與專注 (Priority: P3)

身為一般觀眾，我希望能追蹤自認專業的評影人或資深觀眾，聚焦查看他們的紀錄與綜合評分，並在他們更新時收到提醒。

**Why this priority**: 讓平台呈現「專業 vs. 大眾」的價值落差，形成內容策展網絡。

**Independent Test**: 只需驗證追蹤、通知與專注列表篩選即可獨立測試，不依賴其他故事。

**Acceptance Scenarios**:

1. **Given** 某位專業用戶已標記為「可信評影人」，**When** 我點擊「專注」按鈕並設定通知頻率，**Then** 系統把對方加入我的專注清單並於新紀錄發布時送出站內提醒。
2. **Given** 我切換到個人專注頁，**When** 我使用「只看專業評分」篩選，**Then** 只顯示被專注對象的最新紀錄與平均評價。

---

### User Story 4 - 高價值台詞牆 (Priority: P2)

身為收藏金句的影迷，我希望能看到社群最常收藏的引用牆，並能跳回原始討論或紀錄，以便追蹤上下文與參與回覆。

**Why this priority**: 高價值台詞牆是平台差異化內容，可提升分享與再討論率，應與討論串同等優先。

**Independent Test**: 收藏一段引用後於台詞牆顯示、可點擊回到來源紀錄或討論串。

**Acceptance Scenarios**:

1. **Given** 我在觀影紀錄中收藏一段台詞，**When** 進入台詞牆，**Then** 於列表看到該引用、收藏者及相關標籤，並可跳回原紀錄。
2. **Given** 一段引用有多位使用者收藏，**When** 我排序為「最多收藏」，**Then** 列表依收藏數量降冪並顯示討論入口。

---

### Edge Cases

- 相同作品在不同年份重映時如何避免重複建立作品卡？需允許同作品多版本並提示合併。
- 使用者引用的台詞超過允許字數時，要提供截斷預覽並保留原文附件供審核。
- 當討論串出現爭議文字被檢舉時，需保留審核記錄並暫時下架單一回覆，而非整串刪除；審核必須在 24 小時內完成恢復或撤銷（A 選項）。
- 使用者專注清單達上限時，新增動作應提示整理或升級方案，避免靜默失敗。
- 無作品封面（冷門作品）時，深色主題仍須自動配色並顯示占位圖防止版面破版。

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 系統必須提供登入後的「新增觀影紀錄」流程，欄位至少包含作品名稱、年份、作品來源類型、個人評分 1–10、觀看日期、心得正文、最多三則重點台詞。
- **FR-002**: 紀錄儲存後需自動生成卡片摘要（封面、標籤、評分指標）並同步更新個人版面時間軸。
- **FR-003**: 每篇紀錄可附帶標籤（作品類型、年份、語言、評分區段），且標籤列表需支援建立、搜尋、批量套用。
- **FR-004**: 作品詳情頁必須顯示社群討論串，支援層級化回覆、引用原句、@ 提及與 Markdown 風格格式。
- **FR-005**: 討論串資料需即時刷新或於 5 秒內輪詢，確保回覆獲得即時回饋並記錄時間戳和作者。
- **FR-006**: 個人版面需彙整統計（本月觀影數、平均評分、常用標籤）並支援公開、半公開、私人等可見性設定。
- **FR-007**: 系統必須提供「專注」功能，讓一般用戶可追蹤特定評影者並設定通知頻率，通知管道限定為站內通知（A 選項回覆）。
- **FR-008**: 介面預設深色、未來感樣式，並至少提供「高對比深色」與「亮色模式」兩種可切換主題，確保 AA 對比標準並覆蓋不同使用情境。
- **FR-009**: 搜尋與瀏覽需支援依作品、年份、作品類型、標籤組合、綜合評分區間等條件的複合篩選，綜合評分採專業用戶權重較高的一般平均（B 選項）。
- **FR-010**: （Codex 建議）建立「高價值台詞牆」聚合社群收藏最多的引用，並標示是誰收藏、出處及相關討論入口。
- **FR-011**: （Codex 建議）提供「專業檔案標章」流程，先由系統依指標（發文量、互動率等）推薦名單，再由管理員確認核發並在用戶卡片與討論串中展示，使一般用戶更容易辨識可信來源（C 選項）。

### Key Entities *(include if feature involves data)*

- **作品（Work）**: 儲存影視標準資訊（標題、年份、導演、官方海報、類型、官方評分類），與觀影紀錄及討論串具一對多關係。
- **觀影紀錄（ViewingEntry）**: 個人對單一作品的紀錄，欄位含觀看時間、個人評分、心得、引用、可見性與套用標籤。
- **引用／台詞（QuoteHighlight）**: 連結到觀影紀錄，可包含原文、譯文、劇中時間戳，並可被其他用戶收藏或引用於討論。
- **用戶檔案（Profile）**: 儲存用戶基礎資訊、角色（一般／專業）、統計數據、專注清單、公開設定。
- **討論串（Thread）**: 附著於作品或標籤的主題貼文，支援多層回覆、引用、按讚與檢舉狀態。

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 90% 的受測者可在 90 秒內完成一篇包含心得與台詞的觀影紀錄並於個人版面看到摘要。
- **SC-002**: 在作品或標籤頁中使用複合篩選時，80% 的查詢需於 1 秒內返回結果並顯示準確的計數。
- **SC-003**: 被追蹤的專業用戶每次發布新紀錄後，至少 70% 的專注用戶會於 6 小時內收到並看到通知紀錄，通知遺失率低於 5%。
- **SC-004**: 發布後 30 天內，每位新註冊用戶平均參與至少 2 次討論或回覆，使社群互動率達 60% 以上。
